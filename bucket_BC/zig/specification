DEF[PORTVERSION]=	0.5.0
DEF[TSE_HASH]=		7468055
# ----------------------------------------------------------------------------

NAMEBASE=		zig
VERSION=		${PORTVERSION}
KEYWORDS=		devel lang
VARIANTS=		standard
SDESC[standard]=	Programming language
HOMEPAGE=		https://ziglang.org/
CONTACT=		Tse_[tse@tse.gratis]

DOWNLOAD_GROUPS=	main
# SITES[main]=		GITHUB/ziglang:zig:${PORTVERSION}
SITES[main]=		GITHUB/tse-gratis:zig:${TSE_HASH}
DISTFILE[1]=		generated:main
SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

ONLY_FOR_OPSYS=		freebsd dragonfly netbsd linux

BROKEN[dragonfly]=	Assertion failed: (ActualSize >= (NumVecElements * ElementSize) && "Invalid vector size")

BUILDRUN_DEPENDS=	llvm:single:standard
			clang:compiler:standard
			lld:single:standard
RUN_DEPENDS=		libcxx:primary:standard

USES=			cmake
INSTALL_REQ_TOOLCHAIN=	yes

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/zig
	# remove empty directory
	${RM} -r ${STAGEDIR}${PREFIX}/lib/zig/std/unicode
