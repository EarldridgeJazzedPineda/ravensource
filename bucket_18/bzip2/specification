DEF[PORTVERSION]=	1.0.6
# ----------------------------------------------------------------------------

NAMEBASE=		bzip2
VERSION=		${PORTVERSION}
KEYWORDS=		archivers
VARIANTS=		standard
SDESC[standard]=	Block-sorting file compressor
HOMEPAGE=		http://www.bzip.org/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.bzip.org/${PORTVERSION}/
DISTFILE[1]=		bzip2-${PORTVERSION}.tar.gz:main

SPKGS[standard]=	complete shared static docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

FPC_EQUIVALENT=		archivers/bzip2

USES=			cpe
C_USES[sunos]=		cclibs:shared
CPE_VENDOR=		bzip

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/bzip2 ${STAGEDIR}${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/bzip2recover ${STAGEDIR}${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/bzgrep ${STAGEDIR}${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/bzmore ${STAGEDIR}${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/bzlib.h ${STAGEDIR}${PREFIX}/include
	${INSTALL_DATA} ${WRKSRC}/libbz2.a ${STAGEDIR}${PREFIX}/lib
	${INSTALL_LIB} ${WRKSRC}/libbz2.so.1 ${STAGEDIR}${PREFIX}/lib
	${INSTALL_MAN} ${WRKSRC}/bzip2.1 ${STAGEDIR}${PREFIX}/share/man/man1
	${INSTALL_MAN} ${WRKSRC}/bzgrep.1 ${STAGEDIR}${PREFIX}/share/man/man1
	${INSTALL_MAN} ${WRKSRC}/bzmore.1 ${STAGEDIR}${PREFIX}/share/man/man1
	${LN} -sf bzmore ${STAGEDIR}${PREFIX}/bin/bzless
	${LN} -sf libbz2.so.1 ${STAGEDIR}${PREFIX}/lib/libbz2.so
.for nf in bunzip2 bzcat bz2cat
	${LN} -sf bzip2 ${STAGEDIR}${PREFIX}/bin/${nf}
	${LN} -sf bzip2.1 ${STAGEDIR}${PREFIX}/share/man/man1/${nf}.1
.endfor
.for nf in bzegrep bzfgrep
	${LN} -sf bzgrep ${STAGEDIR}${PREFIX}/bin/${nf}
	${LN} -sf bzgrep.1 ${STAGEDIR}${PREFIX}/share/man/man1/${nf}.1
.endfor
	${LN} -sf bzip2.1 ${STAGEDIR}${PREFIX}/share/man/man1/bzip2recover.1
	${LN} -sf bzmore.1 ${STAGEDIR}${PREFIX}/share/man/man1/bzless.1

	@${MKDIR} ${STAGEDIR}${PREFIX}/share/doc/bzip2
	${INSTALL_DATA} ${WRKSRC}/manual* ${STAGEDIR}${PREFIX}/share/doc/bzip2
	${INSTALL_DATA} ${WRKSRC}/bzip2.txt ${STAGEDIR}${PREFIX}/share/doc/bzip2
	${STAGEDIR}${PREFIX}/bin/bzip2 -f ${STAGEDIR}${PREFIX}/share/doc/bzip2/manual.ps
