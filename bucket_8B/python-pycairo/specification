# manually maintained
# SPKGS require changing with a change in default python version
DEF[PORTVERSION]=	1.20.0
DEF[PYDEFAULT]=		EXTRACT_VERSION(PYTHON3_DEFAULT)
DEF[PYXX]=		py${PYDEFAULT:S/.//g}
# ------------------------------------------------------------------------

NAMEBASE=		python-pycairo
VERSION=		${PORTVERSION}
KEYWORDS=		python devel
VARIANTS=		py38 py39
SDESC[py39]=		Bindings for cairo graphics library (PY39)
SDESC[py38]=		Bindings for cairo graphics library (PY38)
HOMEPAGE=		https://pycairo.readthedocs.io
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		PYPI/p/pycairo
DISTFILE[1]=		pycairo-${PORTVERSION}.tar.gz:main

SPKGS[py39]=		primary
SPKGS[py38]=		primary common

OPTIONS_AVAILABLE=	PY38 PY39
OPTIONS_STANDARD=	none
VOPTS[py38]=		PY38=ON PY39=OFF
VOPTS[py39]=		PY38=OFF PY39=ON

FPC_EQUIVALENT=		graphics/py-cairo
# License listed at PyPI
# LGPL-2.1-only OR MPL-1.1

# install_requires extracted from setup.py

[PY38].USES_ON=				python:py38,sutools
[PY38].MAKEFILE_ON=			DISTNAME=pycairo-${PORTVERSION}
[PY39].USES_ON=				python:py39,sutools
[PY39].MAKEFILE_ON=			DISTNAME=pycairo-${PORTVERSION}

USES=			pkgconfig
GNOME_COMPONENTS=	cairo

post-install:
	${STRIP_CMD} ${STAGEDIR}${PYTHON_SITELIBDIR}/cairo/*.so
	if [ "${VARIANT}" != "${PYXX}" ]; then \
		${RM} -r ${STAGEDIR}${PREFIX}/include/pycairo ;\
		${RM} ${STAGEDIR}${PREFIX}/lib/pkgconfig/py3cairo.pc ;\
	fi
