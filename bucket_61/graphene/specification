DEF[PORTVERSION]=	1.8.6
DEF[SOVERSION]=		0.800.6
DEF[GRAPHENE_VER]=	1.0
# ----------------------------------------------------------------------------

NAMEBASE=		graphene
VERSION=		${PORTVERSION}
KEYWORDS=		graphics devel
VARIANTS=		standard
SDESC[standard]=	Thin layer of graphic data types
HOMEPAGE=		https://ebassi.github.io/graphene/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GITHUB/ebassi:graphene:${PORTVERSION}
DISTFILE[1]=		generated:main

SPKGS[standard]=	complete primary docs

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

LICENSE=		MIT:primary
LICENSE_FILE=		MIT:{{WRKSRC}}/LICENSE
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		graphics/graphene

BUILD_DEPENDS=		gtk-doc:single:standard

USES=			meson pkgconfig python shebangfix
GNOME_COMPONENTS=	glib introspection pygobject
SHEBANG_FILES=		src/identfilter.py
INSTALL_REQ_TOOLCHAIN=	yes
MESON_ARGS=		-Dgtk_doc=true
PLIST_SUB=		API="${GRAPHENE_VER}"
SOVERSION=		${SOVERSION}

VAR_OPSYS[sunos]=	CFLAGS=-D__EXTENSIONS__

post-patch:
	${REINPLACE_CMD} -e 's|=python |=${PYTHON_VERSION} |g' \
		${WRKSRC}/src/meson.build

post-install:
	${MKDIR} ${STAGEDIR}${STD_DOCDIR:H}
	${MV} ${STAGEDIR}${PREFIX}/share/gtk-doc/html/graphene \
		${STAGEDIR}${STD_DOCDIR:H}
	${RM} -r ${STAGEDIR}${PREFIX}/share/gtk-doc
