--- configure.orig	2018-12-07 19:41:56 UTC
+++ configure
@@ -5775,7 +5775,7 @@ fi
 
 
 case $host_os_name in
-        darwin* | *bsd*)
+        darwin* | *bsd* | dragonfly* | solaris*)
                 ARFLAGS="-rcv"
                 ;;
         *)
@@ -5871,7 +5871,6 @@ if test "${with_dbusdir+set}" = set; the
 fi
 
 
-DBUSDIR=""
 DBUS_NOTIFIER=""
 DBUS_NOTIFIERLIBS=""
 
@@ -6435,7 +6434,7 @@ _ACEOF
 # Locale data
 if test "$localedir" = "\${datarootdir}/locale"; then
 	case "$host_os_name" in
-		linux* | gnu* | *bsd* | darwin*)
+		linux* | gnu* | *bsd* | dragonfly*| darwin* | solaris*)
 			CUPS_LOCALEDIR="$datarootdir/locale"
 			;;
 
@@ -6489,11 +6488,15 @@ _ACEOF
 
 # Server executables...
 case "$host_os_name" in
-	*bsd* | darwin*)
+	*bsd* | dragonfly* | darwin* | solaris*)
 		# *BSD and Darwin (macOS)
 		INSTALL_SYSV=""
 		CUPS_SERVERBIN="$exec_prefix/libexec/cups"
 		;;
+	linux*)
+		INSTALL_SYSV="install-sysv"
+		CUPS_SERVERBIN="$exec_prefix/libexec/cups"
+		;;
 	*)
 		# All others
 		INSTALL_SYSV="install-sysv"
@@ -6550,7 +6553,7 @@ fi
 
 if test "$mandir" = "\${prefix}/man" -a "$prefix" = "/"; then
 	case "$host_os_name" in
-        	darwin* | linux* | gnu* | *bsd*)
+        	darwin* | linux* | gnu* | *bsd* | dragonfly* | solaris*)
         		# Darwin, macOS, Linux, GNU HURD, and *BSD
         		mandir="/usr/share/man"
         		AMANDIR="/usr/share/man"
@@ -6572,22 +6575,6 @@ fi
 
 
 case "$host_os_name" in
-	sunos*)
-		# Solaris
-		MAN1EXT=1
-		MAN5EXT=5
-		MAN7EXT=7
-		MAN8EXT=1m
-		MAN8DIR=1m
-		;;
-	linux* | gnu* | darwin*)
-		# Linux, GNU Hurd, and macOS
-		MAN1EXT=1.gz
-		MAN5EXT=5.gz
-		MAN7EXT=7.gz
-		MAN8EXT=8.gz
-		MAN8DIR=8
-		;;
 	*)
 		# All others
 		MAN1EXT=1
@@ -6628,7 +6615,7 @@ if test x$enable_shared != xno; then
 			DSOXX="\$(CXX)"
 			DSOFLAGS="$DSOFLAGS -Wl,-h\`basename \$@\` -G \$(OPTIM)"
 			;;
-		linux* | gnu* | *bsd*)
+		linux* | gnu* | *bsd* | dragonfly*)
 			LIBCUPS="lib$cupsbase.so.2"
 			LIBCUPSIMAGE="libcupsimage.so.2"
 			DSO="\$(CC)"
@@ -6709,12 +6696,11 @@ if test "$DSO" != ":"; then
 				EXPORT_LDFLAGS="-R$libdir"
 			fi
 			;;
-                *bsd*)
+                *bsd* | dragonfly*)
                         # *BSD...
 			if test $exec_prefix != /usr; then
 				DSOFLAGS="-Wl,-R$libdir $DSOFLAGS"
 				LDFLAGS="$LDFLAGS -Wl,-R$libdir"
-				EXPORT_LDFLAGS="-Wl,-R$libdir"
 			fi
 			;;
                 linux* | gnu*)
@@ -6914,13 +6900,13 @@ if test -n "$GCC"; then
     		OPTIM="-fPIC $OPTIM"
 	fi
 
-	# The -fstack-protector option is available with some versions of
+	# The  option is available with some versions of
 	# GCC and adds "stack canaries" which detect when the return address
 	# has been overwritten, preventing many types of exploit attacks.
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether compiler supports -fstack-protector" >&5
-$as_echo_n "checking whether compiler supports -fstack-protector... " >&6; }
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether compiler supports " >&5
+$as_echo_n "checking whether compiler supports ... " >&6; }
 	OLDCFLAGS="$CFLAGS"
-	CFLAGS="$CFLAGS -fstack-protector"
+	CFLAGS="$CFLAGS "
 	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -6937,7 +6923,7 @@ if ac_fn_c_try_link "$LINENO"; then :
 			# Can't use stack-protector with LSB binaries...
 			OPTIM="$OPTIM -fno-stack-protector"
 		else
-			OPTIM="$OPTIM -fstack-protector"
+			OPTIM="$OPTIM "
 		fi
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
@@ -8733,13 +8719,7 @@ fi
 			PAMLIBS="-lpam"
 		fi
 
-		# Find the PAM configuration directory, if any...
-		for dir in /private/etc/pam.d /etc/pam.d; do
-			if test -d $dir; then
-				PAMDIR=$dir
-				break;
-			fi
-		done
+		PAMDIR=/raven/etc/pam.d
 	fi
 
 	LIBS="$SAVELIBS"
