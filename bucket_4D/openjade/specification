DEF[PORTVERSION]=	1.3.3
DEF[PATCHLEVEL]=	p1
DEF[DATADIR]=		{{PREFIX}}/share/sgml/openjade
# ----------------------------------------------------------------------------

NAMEBASE=		openjade
VERSION=		${PORTVERSION}${PATCHLEVEL}
KEYWORDS=		textproc
VARIANTS=		standard
SDESC[standard]=	SGML/XML parser toolkit and DSSSL engine
HOMEPAGE=		http://www.netfolder.com/DSSSL/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/openjade/openjade/${PORTVERSION}
DISTFILE[1]=		openjade-${PORTVERSION}-pre1.tar.gz:main

SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

RUN_DEPENDS=		xmlcatmgr:single:standard
BUILDRUN_DEPENDS=	OpenSP:single:standard

USES=			gmake libtool perl
DISTNAME=		openjade-${PORTVERSION}-pre1
MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-default-catalog={{PREFIX}}/share/sgml/catalog
			--datadir=${DATADIR}
			--disable-nls
INSTALL_TARGET=		install install-man
MAKE_ENV=		STRIP="{{STRIP}}"
PLIST_SUB=		XMLCATMGR={{LOCALBASE}}/bin/xmlcatmgr
			CATALOG_PORTS_SGML={{PREFIX}}/share/sgml/catalog.ports

post-patch:
	@${REINPLACE_CMD} -e 's|<iostream.h>|<iostream>|' \
		${WRKSRC}/style/MultiLineInlineNote.cxx

post-install:
	@${FIND} ${WRKSRC}/dsssl -depth -maxdepth 1 -type f \
		-exec ${INSTALL_DATA} {} ${STAGEDIR}/${DATADIR} \;
