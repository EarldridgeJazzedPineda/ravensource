# Repology only recognizes X.Y as a valid version number so
# if there's another snapshot, bump the REVISION
DEF[SNAPDATE]=		20151223
DEF[PORTVERSION]=	2.4
# ----------------------------------------------------------------------------

NAMEBASE=		rtmpdump
VERSION=		${PORTVERSION}
EPOCH=			1
KEYWORDS=		multimedia
VARIANTS=		standard
SDESC[standard]=	Toolkit for RTMP streams
HOMEPAGE=		http://rtmpdump.mplayerhq.hu/
CONTACT=		nobody

# packaged from git://git.ffmpeg.org/rtmpdump : fa8646da
# and patch from https://github.com/K-S-V/Scripts/releases/, see
# http://stream-recorder.com/forum/
#   customized-rtmpdump-binaries-patch-file-t16103.html

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.ravenports.com/cache-distfiles/
DISTFILE[1]=		rtmpdump-${PORTVERSION}.${SNAPDATE}.tar.gz:main
DISTFILE[2]=		rtmpdump-KSV-20151215.patch.gz:main

SPKGS[standard]=	library program

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

# FPC has different version scheme
# FPC_EQUIVALENT=		multimedia/rtmpdump

LICENSE=		GPLv2+:library
LICENSE_FILE=		GPLv2+:{{WRKSRC}}/COPYING
LICENSE_TERMS=		library:{{WRKDIR}}/TERMS
LICENSE_AWK=		TERMS:"^$$"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/rtmpdump.c
LICENSE_SCHEME=		solo

EXRUN[program]=		rtmpdump:library:standard

USES=			pkgconfig ssl zlib
MAKE_ENV=		THREADLIB="-lpthread"
LDFLAGS=		-L{{OPENSSLLIB}}
			-Wl,-rpath,{{OPENSSLLIB}}
CFLAGS=			-I{{OPENSSLINC}}
PATCHFILES=		2
DISTNAME=		rtmpdump-${PORTVERSION}.${SNAPDATE}

VAR_OPSYS[sunos]=	LDFLAGS=-lsocket
			LDFLAGS=-lnsl
