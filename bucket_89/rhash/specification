DEF[PORTVERSION]=	1.3.4
# ----------------------------------------------------------------------------

NAMEBASE=		rhash
VERSION=		${PORTVERSION}
KEYWORDS=		security
VARIANTS=		standard
SDESC[standard]=	File digest library and utility
HOMEPAGE=		http://rhash.anz.ru/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SF/rhash/rhash/${PORTVERSION}
DISTFILE[1]=		rhash-${PORTVERSION}-src.tar.gz:main

SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

LICENSE=		MIT:single
LICENSE_FILE=		MIT:{{WRKSRC}}/COPYING
LICENSE_SCHEME=		solo

BUILD_TARGET=		build-shared
INSTALL_TARGET=		install-shared
INSTALL_REQ_TOOLCHAIN=	yes
MAKE_ARGS=		INSTALL_PROGRAM="{{INSTALL_PROGRAM}}"
			INSTALL_SHARED="{{INSTALL_PROGRAM}}"
			MANDIR="{{MANPREFIX}}/man"

post-patch:
	@${REINPLACE_CMD} -e 's,/etc/,${PREFIX}&,' ${WRKSRC}/parse_cmdline.c
	@${REINPLACE_CMD} -e '/BYTE_ORDER/s,__,_,g' \
		${WRKSRC}/librhash/byte_order.h

do-test:
	cd ${WRKSRC}/tests && ${SH} test_rhash.sh --full
