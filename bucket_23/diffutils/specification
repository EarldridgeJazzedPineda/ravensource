DEF[PORTVERSION]=	3.7
# ----------------------------------------------------------------------------

NAMEBASE=		diffutils
VERSION=		${PORTVERSION}
REVISION=		1
KEYWORDS=		textproc
VARIANTS=		standard noprefix
SDESC[standard]=	GNU diff utilities
SDESC[noprefix]=	GNU diff utilities with unprefixed program names
HOMEPAGE=		http://www.gnu.org/software/diffutils/diffutils.html
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		GNU/diffutils
DISTFILE[1]=		diffutils-${PORTVERSION}.tar.xz:main

SPKGS[standard]=	complete primary nls
SPKGS[noprefix]=	complete primary nls

OPTIONS_AVAILABLE=	NOPREFIX
OPTIONS_STANDARD=	none
VOPTS[noprefix]=	NOPREFIX=ON

LICENSE=		GPLv3+:primary
LICENSE_FILE=		GPLv3+:{{WRKSRC}}/COPYING
LICENSE_TERMS=		primary:{{WRKSRC}}/TERMS
LICENSE_AWK=		TERMS:"GDIFF_MAIN"
LICENSE_SOURCE=		TERMS:{{WRKSRC}}/src/diff.c
LICENSE_SCHEME=		solo

FPC_EQUIVALENT=		textproc/diffutils

BUILD_DEPENDS=		libsigsegv:static:standard
			libiconv:shared:standard

USES=			charsetfix gettext-runtime
MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--enable-nls
INFO=			primary:diffutils

[NOPREFIX].CONFIGURE_ARGS_OFF=		--program-prefix=g
[NOPREFIX].DESCRIPTION=			Build without prefixing all programs with "g"

post-patch:
	${REINPLACE_CMD} -e '/^mkdir/s:@mkdir_p@:${MKDIR}:' \
		${WRKSRC}/po/Makefile.in.in
