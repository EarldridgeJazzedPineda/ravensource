DEF[PORTVERSION]=	EXTRACT_INFO(BINUTILS_VERSION)
DEF[FREEBSD_11]=	EXTRACT_INFO(GNATCROSS_FREEBSD_11)
# ----------------------------------------------------------------------------

NAMEBASE=		gnatcross-binutils
VERSION=		${PORTVERSION}
KEYWORDS=		lang
VARIANTS=		FARM64_R11
SDESC[FARM64_R11]=	C/Ada cross-compiler linker (FreeBSD/ARM64 R11)
HOMEPAGE=		http://www.dragonlace.net
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		SOURCEWARE/binutils/releases
DISTFILE[1]=		binutils-${PORTVERSION}.tar.bz2:main

SPKGS[FARM64_R11]=	single

OPTIONS_AVAILABLE=	FARM64R11
OPTIONS_STANDARD=	none
VOPTS[FARM64_R11]=	FARM64R11=ON

FPC_EQUIVALENT=		lang/gnatdroid-binutils

BUILD_DEPENDS=		zlib:static:standard
			gmp:static:standard
			mpfr:static:standard

USES=			bison gmake
DISTNAME=		binutils-${PORTVERSION}
MUST_CONFIGURE=		yes
CONFIGURE_ARGS=		--target={{XCCTARGET}}
			--prefix={{BRANCH_PREFIX}}
			--with-sysroot={{SRPREFIX}}
			--with-gmp={{LOCALBASE}}
			--with-mpfr={{LOCALBASE}}
			--with-system-zlib
			--disable-werror
			--disable-nls
PLIST_SUB=		TARGET="{{XCCTARGET}}"
			BRANCH2="{{BRANCH2}}"

[FARM64R11].DESCRIPTION=		Create binutils for FreeBSD/ARM64 Release 11
[FARM64R11].BUILDRUN_DEPENDS_ON=	gnatcross-sysroot-freebsd:single:ARM64_R11
[FARM64R11].MAKEFILE_ON=		PREFIX={{LOCALBASE}}/FreeBSD11_ARM64
					XCCTARGET=aarch64-raven-freebsd${FREEBSD_11}
					BRANCH2=
					BRANCH_PREFIX={{PREFIX}}/{{BRANCH2}}
					SRPREFIX=gnatcross-sysroot-aarch64

post-install:
	# Move the unwanted documentation out of the stage directory
	${MV} ${STAGEDIR}${BRANCH_PREFIX}/share ${WRKDIR}
