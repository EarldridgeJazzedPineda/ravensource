DEF[PORTVERSION]=	1.18.0
# ----------------------------------------------------------------------------

NAMEBASE=		video4linux
VERSION=		${PORTVERSION}
KEYWORDS=		multimedia
VARIANTS=		standard
SDESC[standard]=	Video device drivers
HOMEPAGE=		http://freshmeat.net/projects/libv4l
CONTACT=		nobody

DOWNLOAD_GROUPS=	main dvb
SITES[main]=		http://linuxtv.org/downloads/v4l-utils/
DISTFILE[1]=		v4l-utils-${PORTVERSION}.tar.bz2:main

SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

FPC_EQUIVALENT=		multimedia/libv4l

BR_DEPS[dragonfly]=	argp-standalone:single:standard
BR_DEPS[freebsd]=	argp-standalone:single:standard
BR_DEPS[sunos]=		argp-standalone:single:standard

BUILD_DEPENDS=		evdev-proto:single:standard

USES=			gmake jpeg libtool pkgconfig
DISTNAME=		v4l-utils-${PORTVERSION}
MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		--disable-doxygen-doc
INSTALL_REQ_TOOLCHAIN=	yes
INSTALL_TARGET=		install-strip

post-extract:
	${REINPLACE_CMD} -e '/CPPFLAGS=.*freebsd/d' ${WRKSRC}/configure
	${MKDIR} ${WRKSRC}/lib/include/sys

post-patch-freebsd:
	${REINPLACE_CMD} -e 's| -lrt||' \
		${WRKSRC}/lib/libv4lconvert/Makefile.in \
		${WRKSRC}/lib/libv4lconvert/libv4lconvert.pc.in
	${TOUCH} ${WRKSRC}/lib/include/sys/sysmacros.h

post-patch-dragonfly:
	${REINPLACE_CMD} -e 's| -lrt||' \
		${WRKSRC}/lib/libv4lconvert/Makefile.in \
		${WRKSRC}/lib/libv4lconvert/libv4lconvert.pc.in
	${TOUCH} ${WRKSRC}/lib/include/sys/sysmacros.h
