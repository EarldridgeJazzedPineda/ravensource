--- configure.orig	2013-10-07 12:11:45 UTC
+++ configure
@@ -3784,13 +3784,13 @@ _ACEOF
 fi
 
 CURS=0
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for scrollok in -lncurses" >&5
-$as_echo_n "checking for scrollok in -lncurses... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for scrollok in -lncurses -ltinfo" >&5
+$as_echo_n "checking for scrollok in -lncurses -ltinfo... " >&6; }
 if test "${ac_cv_lib_ncurses_scrollok+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lncurses  $LIBS"
+LIBS="-lncurses -ltinfo $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -3821,7 +3821,7 @@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ncurses_scrollok" >&5
 $as_echo "$ac_cv_lib_ncurses_scrollok" >&6; }
 if test "x$ac_cv_lib_ncurses_scrollok" = x""yes; then :
-  CURS=1 ; LIBS="$LIBS -lncurses"
+  CURS=1 ; LIBS="$LIBS -lncurses -ltinfo"
 fi
 
 if test "$CURS" !=  "1"; then
@@ -4897,6 +4897,7 @@ else
 /* end confdefs.h.  */
 #include <sys/types.h>
 #include <sys/time.h>
+#include <stdlib.h>
 #include <unistd.h>
 
 int main()
@@ -4948,7 +4949,7 @@ if ac_fn_c_try_compile "$LINENO"; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; };
 $as_echo "#define HAVE_PROCESS_SYSCTL 1" >>confdefs.h
-
+HAVE_PROCESS_SYSCTL=1
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
