DEF[PORTVERSION]=	1.0
# ----------------------------------------------------------------------------

NAMEBASE=		idnkit
VERSION=		${PORTVERSION}
KEYWORDS=		dns
VARIANTS=		standard
SDESC[standard]=	Library to handle internationalized domain names
HOMEPAGE=		https://www.nic.ad.jp/ja/idn/idnkit/download/
CONTACT=		nobody

DOWNLOAD_GROUPS=	main
SITES[main]=		http://www.nic.ad.jp/ja/idn/idnkit/download/sources/
DISTFILE[1]=		idnkit-${PORTVERSION}-src.tar.gz:main

SPKGS[standard]=	single

OPTIONS_AVAILABLE=	none
OPTIONS_STANDARD=	none

FPC_EQUIVALENT=		dns/idnkit

USES=			iconv libtool fbsd10fix
DISTNAME=		idnkit-${PORTVERSION}-src
MUST_CONFIGURE=		gnu
CONFIGURE_ARGS=		{{ICONV_CONFIGURE_ARG}}
			--enable-runidn
			--enable-extra-ace
LDFLAGS=		{{ICONV_LIB}}

post-patch:
	@${FIND} ${WRKSRC} -name Makefile.in | ${XARGS} ${REINPLACE_CMD} -e \
		's|mode=link $$(LD)|mode=link $$(CC)|'

post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/*.so
	${MV} ${STAGEDIR}${PREFIX}/etc/idnalias.conf \
		${STAGEDIR}${PREFIX}/etc/idnalias.conf.sample
	${MV} ${STAGEDIR}${PREFIX}/etc/idn.conf \
		${STAGEDIR}${PREFIX}/etc/idn.conf.sample
